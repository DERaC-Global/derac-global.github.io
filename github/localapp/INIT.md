
# Git操作までの下準備

```mermaid
    flowchart LR;
    Register((アカウントの作成))-->Repo[新規レポジトリの作成];
    Register-->Invitation[レポからの招待を承諾];
    Repo-->SSL[暗号鍵の生成と登録];
    Register-->SSL;
    Invitation-->SSL;
    SSL-->Git[(レポジトリの登録)];
```

Git コマンドを操作する前に、いくつかの操作を行うことが必要です。これは、レポジトリの作成などの基本的な部分に加えて、秘密鍵の作成と登録という手順を踏まなければ、その後の push によるレポジトリの更新などが行えません。

## レポジトリの作成

### 既存プロジェクトからの招待を承諾

既に Github アカウントを持っていた場合は Github の ユーザー名で、もし持っていなかった場合はメールアドレス宛に既存プロジェクトからの招待が届いている場合、これを承諾することで招待されたプロジェクトのリポジトリへの与えられた権限でのアクセスが可能になります。

### 新規プロジェクトのリポジトリを作成

アカウント作成後、招待がない場合でも自分でリポジトリを新規作成することができます。このリポジトリの所有者は自分となり、他の開発者を招待することで共同作業を始めることができます。作成の流れは以下の通りです。

1. ログイン &rarr; 上部タブまたは右上アバターメニュー &rarr; Repository (Your repository)
2. 右上メニュー &rarr; New repository
   1. 一般に公開する場合は *Public*、公開しない場合は *Private*
   2. 作成時点では *Private* を選択して、公開することを決めた時点で変更できます
   3. レポジトリ名を含めたその他項目も後から変更できます
   4. `README.md` が各フォルダにアクセスしたときに表示されます
3. 必要事項の入力が完了 &rarr; Create repository
4. レポジトリの作成は完了です

>[!NOTE]
>特殊なリポジトリとして、[Github Pages](https://pages.github.com/) 用のものがあります。これはプロジェクトや開発者個人のウェブページを作成できる機能ですが、ユーザー名や組織名（Organization）を `xxxxx` として、リポジトリ名を `xxxxx.github.io` として作成し、トップディレクトリに `index.html` を配置することで開設することができます。

## 秘密鍵の生成と公開鍵の登録

OpenSSL のツールを使ってRSA暗号鍵を簡単に作成することができます。ホームディレクトリ内に `.ssh` というフォルダがない場合は作成してから以下の手順に進んでください。

Linux や FreeBSD などの PC-UNIX や macox の場合は以下のコマンドで暗号鍵を作成することができます。

```
cd ~/.ssh
ssh-keygen -t rsa
```

このコマンドを実行すると、パスワード等を聞かれることが有りますが、すべて空欄で [Enter] を押して進んでください。（メールアドレスは入力してもらって大丈夫です）Windows の場合は、既知の問題として上記のコマンドだとエラーになるか、または、パスワードが勝手に設定されてしまうため、以下のオプションをつけて鍵を生成してください。

```
cd ~\.ssh
ssh-keygen.exe -q -t ed25519 -C '""' -N '""' -f id_rsa
```

上記のコマンドが実行されると、秘密鍵 `id_rsa` と公開鍵 `id_rsa.pub` が作成されます。

>[!NOTE]
>秘密鍵を置くフォルダ名は `.ssh` でなくても構いませんが、Windowsではこれ以外のフォルダにSSHの秘密鍵が置かれているとアクセス権限のエラーで接続できないケースがあります。また、これ以外の場合でも同様のエラーが出る場合、秘密鍵 `id_rsa` は自分以外読み書きできないよう `0600` にパーミッション設定してください。
>また、もし `id_rsa` 以外のファイル名を指定して鍵を生成した場合は、そのファイル名に応じた２つのファイルが生成されるので、それに応じて対処してください。

つぎに生成された公開鍵 `id_rsa.pub` を Github に登録しますが、この操作は Github の管理画面で行う必要があります。

1. Github にログイン &rarr; 右上のアバターアイコン
2. 管理メニュー &rarr; **Settings**
3. 右側（スマホでは上部）メニュー &rarr; **SSH & GPG keys**
4. SSH keys &rarr; **New SSH key**
5. 公開鍵 `id_rsa.pub` の中身をコピーして *Key* に貼り付け &rarr; **Add SSH key**
   1. *Title* は自分の管理用なので分かる名前を付けてください
   2. *Key type* は Authentication key（規定値）です
6. 以上で公開鍵の登録は完了です

>[!WARNING]
>公開鍵の中身はテキストエディタで開いて確認するか、ターミナル上で `cat id_rsa.pub` などのコマンドを実行して中身を表示させたものをコピーしてください。このとき Word や Pages などで開いてコピーしても良いですが、開いたファイルを保存してしまうとその後問題が出る可能性が高いので、保存はしないでください。

この後、[次のステップ](https://github.com/DERaC-Global/tag_japan/tree/main/docs/github/localapp/INITIAL_COMMIT.md)に進みます。
